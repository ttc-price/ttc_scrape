import requests
import time
import smtplib
from datetime import datetime

url = "https://us.tamrieltradecentre.com/api/pc/Trade/Search"
items: [
    ["18124", "Chromium+Plate", "300000"],
    ["17927","Chromium+Grains", "30000"],
    ["17799", "Zircon+Plate", "105000"],
    ["18043", "Zircon+Grains", "10000"],
    ["6132", "Perfect+Roe", "96000"],
    ["4794", "Hakeijo", "59000"],
    ["211", "Dreugh+Wax", "28000"],
    ["5687", "Tempering+Alloy", "14000"],
    ["11983", "Mundane+Rune", "1100"]
]
querystring = [ {"ItemID":"18124","ItemNamePattern":"Chromium+Plate","PriceMax":"300000","V3ReCaptchaToken":"03ANYolqtfCStJLXBqto026YXSirj-MulZ2emh6Grtl_zQncpo5g0VtqvHZkd4AqpnyO23o2mbSJFP10XGtHU3ym3pXosk0RinSn2YFGuzuj-pihLDyyO4IuO5sCbXyP-6XsOMb27IVKG1Vc_mm-x5LHqzP-DuUoSLje3at3y6BxgWct0YyzewYnVD1iCQzjwneInF92cpaDPYjslKXtpLgLyyuLMhRa09u2v5TIC02JFUoLBj9KpssLsJo3kJWlu30KKhuTiMQMOETCrOmcmNCEkAK_JmCVwFQJ8f8jPHn_B-hRPhP2f52YYowyaVkAQtf8xDXejWWjO0RGhOtu8pGqRby6x_wppiBrAJpp0Fw3ZYcragwG9sgvXJgofmTDIxwx70mr5zE9Z_D_Cn6gmQxsKcz5xQMJfTrJXHvKWbdo9QFIKEMdhbGDHx8rjgjaqOJZcS5EAja9YR1tMmZDWXukbFGVqFU7o_dWLuFjhbBYzU4D-LSE6AGrqaF_x3begllojq-R5Z6hHAw3s5HACMKj9_bHpux_OIwg","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"17927","ItemNamePattern":"Chromium+Grains","PriceMax":"30000","V3ReCaptchaToken":"03ANYolqvR0C6vUEj4O8yLYeHMVQDbbtu9Pj2oZszg1-_61IoCH8qyaAX4UVik_eSjm2z5zYryI0_Ikx2hIksxa6M9w1dQg-EShRfGPCnPQAf6Mjap5cQpaeBv0GkZEr9g8ZkjLaRhy639gP1Cm25t4GykT5sEqOXGU5lkY6WtDPkGZ41i2xBNhqOv0W60tNcy3Y_FckMFX_Q3OSJqo4gmu1PHP8ot1n7wZVqY-SzrUr1_I67EYsgpgBmBL7oYXbNootFLNDBZ2yKr1SO1dQJV9hc06Ftp4IDZB-sIpPKT16zX8Ejnzu6ri_Zxr7Tn4Z76T1pQosZKwdNmeKEG94aq2U4qra-pdx2YEZ9qjhmPMmCv7Xuy-Qg299Ov6LiziRZwgllK5jdneOzRksM5dbOWG6XUMV0FRX6oFCbMoi-J6BO-j2hH7wdp5zrfbIBoFCCcOtJofORExe1KgRlDJMNM3QgW1FxSOepXtQbd09DHAh7P7UlXgZ-f8UjSVsVLcn94_ynZ17J4f0ZKhxYjzQ6eQ-IvbVfoTRvf_w","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"17799","ItemNamePattern":"Zircon+Plate","PriceMax":"105000","V3ReCaptchaToken":"03ANYolqshgxMVJE-i8_OuxxyHmywFk-xwsnknctTJFOpcROu7IgXtTZN-DLnYsheNX9dg8TA1S183j0Lq3djXEGLH7tMhYORTrFThJmxX4VpZVE8lht0RRXZoqsiPyCTHO7lH0WVgIlMPj3WVIsb_66dt20PtC1VngnVVKWCgZnij3ZQwh1-G0bDEt96DbdtmYVkcoNtRUWb-yNXQTo3LqzAQoPVsuw6aL9HM3CYGbF5NGYKKXefX-zYCzbtbmGUBX41yTvJuhBiQpWZAXk0RYfyx0S7zbvqMc_BR3Yfk4VITgYpLgCTbuvstb8G4cc7R2wseSXR9dOau16rSq0-j9DGg-P6OT8Shd6xwA0ZuXWsei1z9FGgafbK3vGQ1pigGOUAixgnFtK2emTbROJjUiTI2V1hd0WHLhCADvWZO3vGzQnDfJO6Mk97IOTZPMRyeeQy9QtNaMVfwDBtErnAi1-2hXFNKqMXchYoHgSCS-tzrhxHfjsR-AQfptdjJfQy_BHLktJP4kT4W5PRw35mHjWIbAWfC71WhBQ","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"18043","ItemNamePattern":"Zircon+Grains","PriceMax":"10000","V3ReCaptchaToken":"03ANYolqs5VLGqtNauxvxwWC_0WGbDm5oQFpmrPXNhR-DEN3SvCpuB_sUk7Wldk1Tb3-M66urBopkYI0zTT0sgWMcIdhju27JZvY0RrJTdYE2Y3qEpS0BbmVJrZ4e5hL6fgG5qI6014dgB3Jumgwa2MwPkxIjXDPmADAuU48HQTc4LPpWKad63dydE_0rsCAv5qovTQmZdlODR1GgoXW8IFtsdPZKr1rOovExp-oSwbHMd4cPx0SqcyMTkL5G_LvIXSkXwzCBnOmK2bUU6Jy3Ogoo04xy4AofGJv31mM8-MbhLyju4aY3urD7A-Acx6qTijAh1G40npUtidnOPGT76o--EHX9o3OajUJ3534W7qfSAw4HkdyQZXqWNEiFVnAJY_gSOkUL6BZjnOUeRZoxYhcorrsjAiK1GVTtRZO3g6oPWLwEXL1y7xhaqmN7l85teT6Xa1ILcWTbYLq-MM9yFbMTl7bme_zbumGXkId49NxGKPDZJ_rSPHu3tvrlqqxyMRUjfsw3H4ZajomgpdOj0ubrrrmlEIwVMbw","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"6132","ItemNamePattern":"Perfect+Roe","PriceMax":"96000","V3ReCaptchaToken":"03ANYolqtxu8ZoULqjUTdNZJk4gGRYdjHG2JYFfDST2L6StZJsj113htKjKsl0J_VybhbjARPyG_7lTiqQjDZjoVxpW8My76GuxN1CV0_wc-DL6iVe1IATpFGUnmsWBP1oWhM-oSFBW9LuYvYStN-BqB3bENb3ir7rLQy2Nwv3QXRuxK1AYpGV0l8TkULOSASfXqlY40avfEQoq1Pw43VdUKUhsJebikgFHlhRLMv2OwPCeITRm42pGgNUoxn6ITvFCJUyOulT-U47DOlb9HIkTbQkAnCs2_UvGRm82TNXVO185Y8ghbT-PxhnYFttQeuzU5A78qBChEWaWqCxU8Fsa7o4VgsJDIim6V7AZw2sF_kuHIdro90xEXwZ1m0gt3ar6WT8LhL_Db4JaHmWo68zzbYTwJigPRrjHYAVfjVMm6bhk2RPhePnJzOvgaKbZjfDVDL2Z3RUvsT5yj1KPdBK6DWtjEmgfECPOyqlXRQWDlVlRzuhlbzH72iSoXuZteKPmzKSWh0rMQrTA0lqgVe2S-qtO2mVc-OFPw","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"4794","ItemNamePattern":"Hakeijo","PriceMax":"59000","V3ReCaptchaToken":"03ANYolqvgaNsUCwC48Kvr_X17g2RUYmkL0jihmWTYh26FLkkvECr_2FB0pG_z1ccIk8l1D0PnIBP1Laf0mxBkPVOT3z4M81U5TaSbvZ0YGZjGOYBBLFMQ2s0QqBHrNrj-loW_qbq3wCgckC3_kzsycpZbP6Y6soL_BbT3qGqku5ztJV2GP_3TzAMnfdTaDwSbBxQAmZzcTGsAzoL-fppjKxIv7R8pCWJ0y00Ol0Y1PC4Uw9h2g3t6tPdtXg2G3hoRvjlSXAkFZYoTuNUw7gGqgajsYrGvnOtgwOxjIsX861IJh-J1ac6KK7s4-XZ23GC5bXGsJKN65uODxl-qQ6hMXbl7uDZ-LvHByquzY3g7WjfQUrn10eyGME-_3a7hle3nkqmOH5SbaSqVaGW-4OAoTTAsPo3OL1gEsvtgK9Y1ZdgCowHMiB8OKFmrdYdQf-snIxedBrKadbYZkiIk6_MuzGm_ylAT5ESbYVl0VlQCo3vf12e04ngZNoE0OsIQPn6b4aQ-P0OlV8VNS3-JRwdph2lFZWhbSo6FAA","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"211","ItemNamePattern":"Dreugh+Wax","PriceMax":"28000","V3ReCaptchaToken":"03ANYolque8aZQG6o9k5aGhbf0qoLJumjZpzsQhjkeHJLdjTcHB9hhTOlaFu5MpL9IXg290XMtMzbYsXJH9Ey4nYXNR7kTj2BOyHi5QaiI5UbPQ6o7oV1hWQntFEXNNKCt_31HB9CcOf8y0wL_iDBmuKjGxrlpdUXAqpShBoQnLkwvv7S2TbtqxhfPrfOnweyznvyvUnn5caA7h-e3exhoSD0Ae2zktUbxdlfNqQFK7PFCalz9OYMXbWw6uHcJ7VyWLJ2m1hx8a6nmyvYJSUep839iL69u42YX3bWaK93LLxmHP7LoWVE_x2D8TwzJcJG4tSujm8uVh7JuflEDDGJXpqdihYAZRTZgqKaIeEWJGM9A-isdKKVGp1nvdM5zrCcBjQwYedVCVdeNTD8l-d1HF8dycRctBDDCBaBcwVZ3Mm90WvB_nWVsYscjn6HB3Qn--1J5h-Jc4P2QE1qlNsL0r2LKetp_YUM1fAEfqiNAnAlKqzAipxY9WjYKe8UA_DvcH1HWfzARSnoMayyif4dyAjsY-866xAFpnQ","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"5687","ItemNamePattern":"Tempering+Alloy","PriceMax":"14000","V3ReCaptchaToken":"03ANYolqst8gXZO4N7olJVGzoRZh7Encp9y8tuSd61QyVz5giEXQ68-KMr1VpNTmkyk31ii88Xg8x0w-wjjdqZ0QoNl_cEgnXFyh8kF4gqaAdZTAwucXRblqmVMxZYSiAOo5o2G3KVpRvVUsKx9rt2bEJrjs8ZBlNQoiVov1TEoSCDxSgTb4ZjtbjzltA7hU2T38i0voKUd6-6DmarMpLOYV7LXUiyqDIWYRqwmeTA-xwqoZ61aP6rg8NhOd4XM5Pfhv-Zqs2dAEYKEdCw5zlEDy8liB5rfgTdQtm7GARyO79fsKCrsJGAf_e2weV9aDZAqNSpF1f5-yrX0UOwsBKTmq9cwe0wzHE3RTU909MvMzYU2ScEOT44I98lVcM3BZ9utNDmMslUrFSLorDlqeR2BCMujQirppTIguD1uuTwO2SYXSxgwAaR7F_0caK2hd_5RIsAhHDHNK8OHI_sk9dmiRtQ7h0wFSMk1CPG9PYq-5ZMqxbk24u1U6C7GNhJXDT81tk9GtYX8emuPywZOZCshPf96fPY_pMVaA","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"},
                {"ItemID":"11983","ItemNamePattern":"Mundane+Rune","PriceMax":"1100","V3ReCaptchaToken":"03ANYolqtJBb5KvlzUYgEUxOySQxcRnwft_dyv8CEz3tgnEVe_lWaiJrxyfiJ9q67jCVsygSIuPtNQyNTeFC6_Q0tseLbTNIpEt1--Hgn77MxfE5Ee4arj2rxYjoz10NsYBJOA911WxWIsjQdkUUkXGVDlsply388BBbgMt_O_sArtqppeMMLUe4WF5yiC3O53q0qCq_jAaU8FAhtM8YLcmdPJdMNwaL3OYaEBflSreHYoMYLsCBHBpNpj1l1V6XUAWfdC3SFyTDWRcN6Xf5i1IWStOFZHw7soqECi-UvoOoSaWZsg8av3021W769Bet3rAkDjBtC90jcalFy9p-IX4Xnd-0PKjf5dHvFNoWEXqXSC8u5S90z_0poM7yDSStUTGIMF3wgq_7B_3BRrKHx2BS7MZI5tQ_T0DfQ-q0UxeaPqlccbH5EiX7R3XP8llXZFGMNY1h37mCYhpnpHfyZNsL0G0On09F1vIysryU6qzcz6IODIftUkGzDvyDKRbLZRzCGzdDCz0ld7GCyF6uHb4O9gd1P69BWv0A","v":"T0a-v7SfT4Zi4J2kmcExAOQeEyLYcsisD907W_MajdQ1"}
                ]
payload = ""
heads =[{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=18124&ItemNamePattern=Chromium+Plating&PriceMax=300000&V3ReCaptchaToken=03ANYolqtfCStJLXBqto026YXSirj-MulZ2emh6Grtl_zQncpo5g0VtqvHZkd4AqpnyO23o2mbSJFP10XGtHU3ym3pXosk0RinSn2YFGuzuj-pihLDyyO4IuO5sCbXyP-6XsOMb27IVKG1Vc_mm-x5LHqzP-DuUoSLje3at3y6BxgWct0YyzewYnVD1iCQzjwneInF92cpaDPYjslKXtpLgLyyuLMhRa09u2v5TIC02JFUoLBj9KpssLsJo3kJWlu30KKhuTiMQMOETCrOmcmNCEkAK_JmCVwFQJ8f8jPHn_B-hRPhP2f52YYowyaVkAQtf8xDXejWWjO0RGhOtu8pGqRby6x_wppiBrAJpp0Fw3ZYcragwG9sgvXJgofmTDIxwx70mr5zE9Z_D_Cn6gmQxsKcz5xQMJfTrJXHvKWbdo9QFIKEMdhbGDHx8rjgjaqOJZcS5EAja9YR1tMmZDWXukbFGVqFU7o_dWLuFjhbBYzU4D-LSE6AGrqaF_x3begllojq-R5Z6hHAw3s5HACMKj9_bHpux_OIwg",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.615891581.1659732621; _gid=GA1.2.745962271.1659732622; __gads=ID=67cf507c2608561a-2291f511ced40086:T=1659732623:RT=1659732623:S=ALNI_MYxzA38Ke7fb61cbSBcHoFXS885PQ; __gpi=UID=000007a89297910e:T=1659736268:RT=1659736268:S=ALNI_MYQVdsCeigGCoa-KOotFb48elRtiQ; _gat=1",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=18124&ItemNamePattern=Chromium+Plating&PriceMax=300000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/104.0.0.0 Safari/537.36",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=17927&ItemNamePattern=Chromium+Grains&PriceMax=30000&V3ReCaptchaToken=03ANYolqvR0C6vUEj4O8yLYeHMVQDbbtu9Pj2oZszg1-_61IoCH8qyaAX4UVik_eSjm2z5zYryI0_Ikx2hIksxa6M9w1dQg-EShRfGPCnPQAf6Mjap5cQpaeBv0GkZEr9g8ZkjLaRhy639gP1Cm25t4GykT5sEqOXGU5lkY6WtDPkGZ41i2xBNhqOv0W60tNcy3Y_FckMFX_Q3OSJqo4gmu1PHP8ot1n7wZVqY-SzrUr1_I67EYsgpgBmBL7oYXbNootFLNDBZ2yKr1SO1dQJV9hc06Ftp4IDZB-sIpPKT16zX8Ejnzu6ri_Zxr7Tn4Z76T1pQosZKwdNmeKEG94aq2U4qra-pdx2YEZ9qjhmPMmCv7Xuy-Qg299Ov6LiziRZwgllK5jdneOzRksM5dbOWG6XUMV0FRX6oFCbMoi-J6BO-j2hH7wdp5zrfbIBoFCCcOtJofORExe1KgRlDJMNM3QgW1FxSOepXtQbd09DHAh7P7UlXgZ-f8UjSVsVLcn94_ynZ17J4f0ZKhxYjzQ6eQ-IvbVfoTRvf_w",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.615891581.1659732621; _gid=GA1.2.745962271.1659732622; __gads=ID=67cf507c2608561a-2291f511ced40086:T=1659732623:RT=1659732623:S=ALNI_MYxzA38Ke7fb61cbSBcHoFXS885PQ; __gpi=UID=000007a89297910e:T=1659736268:RT=1659736268:S=ALNI_MYQVdsCeigGCoa-KOotFb48elRtiQ; _gat=1",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=17927&ItemNamePattern=Chromium+Grains&PriceMax=30000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Linux; Android 12; SM-S906N Build/QP1A.190711.020; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/80.0.3987.119 Mobile Safari/537.36",
    "version": "13"},
 {
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=17799&ItemNamePattern=Zircon+Plating&PriceMax=105000&V3ReCaptchaToken=03ANYolqshgxMVJE-i8_OuxxyHmywFk-xwsnknctTJFOpcROu7IgXtTZN-DLnYsheNX9dg8TA1S183j0Lq3djXEGLH7tMhYORTrFThJmxX4VpZVE8lht0RRXZoqsiPyCTHO7lH0WVgIlMPj3WVIsb_66dt20PtC1VngnVVKWCgZnij3ZQwh1-G0bDEt96DbdtmYVkcoNtRUWb-yNXQTo3LqzAQoPVsuw6aL9HM3CYGbF5NGYKKXefX-zYCzbtbmGUBX41yTvJuhBiQpWZAXk0RYfyx0S7zbvqMc_BR3Yfk4VITgYpLgCTbuvstb8G4cc7R2wseSXR9dOau16rSq0-j9DGg-P6OT8Shd6xwA0ZuXWsei1z9FGgafbK3vGQ1pigGOUAixgnFtK2emTbROJjUiTI2V1hd0WHLhCADvWZO3vGzQnDfJO6Mk97IOTZPMRyeeQy9QtNaMVfwDBtErnAi1-2hXFNKqMXchYoHgSCS-tzrhxHfjsR-AQfptdjJfQy_BHLktJP4kT4W5PRw35mHjWIbAWfC71WhBQ",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.615891581.1659732621; _gid=GA1.2.745962271.1659732622; __gads=ID=67cf507c2608561a-2291f511ced40086:T=1659732623:RT=1659732623:S=ALNI_MYxzA38Ke7fb61cbSBcHoFXS885PQ; __gpi=UID=000007a89297910e:T=1659736268:RT=1659736268:S=ALNI_MYQVdsCeigGCoa-KOotFb48elRtiQ; _gat=1",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=17799&ItemNamePattern=Zircon+Plating&PriceMax=105000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Linux; Android 5.1.1; SM-G928X Build/LMY47X) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.83 Mobile Safari/537.36",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=18043&ItemNamePattern=Zircon+Grains&PriceMax=10000&V3ReCaptchaToken=03ANYolqs5VLGqtNauxvxwWC_0WGbDm5oQFpmrPXNhR-DEN3SvCpuB_sUk7Wldk1Tb3-M66urBopkYI0zTT0sgWMcIdhju27JZvY0RrJTdYE2Y3qEpS0BbmVJrZ4e5hL6fgG5qI6014dgB3Jumgwa2MwPkxIjXDPmADAuU48HQTc4LPpWKad63dydE_0rsCAv5qovTQmZdlODR1GgoXW8IFtsdPZKr1rOovExp-oSwbHMd4cPx0SqcyMTkL5G_LvIXSkXwzCBnOmK2bUU6Jy3Ogoo04xy4AofGJv31mM8-MbhLyju4aY3urD7A-Acx6qTijAh1G40npUtidnOPGT76o--EHX9o3OajUJ3534W7qfSAw4HkdyQZXqWNEiFVnAJY_gSOkUL6BZjnOUeRZoxYhcorrsjAiK1GVTtRZO3g6oPWLwEXL1y7xhaqmN7l85teT6Xa1ILcWTbYLq-MM9yFbMTl7bme_zbumGXkId49NxGKPDZJ_rSPHu3tvrlqqxyMRUjfsw3H4ZajomgpdOj0ubrrrmlEIwVMbw",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.615891581.1659732621; _gid=GA1.2.745962271.1659732622; __gads=ID=67cf507c2608561a-2291f511ced40086:T=1659732623:RT=1659732623:S=ALNI_MYxzA38Ke7fb61cbSBcHoFXS885PQ; __gpi=UID=000007a89297910e:T=1659736268:RT=1659736268:S=ALNI_MYQVdsCeigGCoa-KOotFb48elRtiQ; _gat=1",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=18043&ItemNamePattern=Zircon+Grains&PriceMax=10000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Linux; Android 7.1.1; Google Pixel Build/NMF26F; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/54.0.2840.85 Mobile Safari/537.36",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=6132&ItemNamePattern=Perfect+Roe&PriceMax=96000&V3ReCaptchaToken=03ANYolqtxu8ZoULqjUTdNZJk4gGRYdjHG2JYFfDST2L6StZJsj113htKjKsl0J_VybhbjARPyG_7lTiqQjDZjoVxpW8My76GuxN1CV0_wc-DL6iVe1IATpFGUnmsWBP1oWhM-oSFBW9LuYvYStN-BqB3bENb3ir7rLQy2Nwv3QXRuxK1AYpGV0l8TkULOSASfXqlY40avfEQoq1Pw43VdUKUhsJebikgFHlhRLMv2OwPCeITRm42pGgNUoxn6ITvFCJUyOulT-U47DOlb9HIkTbQkAnCs2_UvGRm82TNXVO185Y8ghbT-PxhnYFttQeuzU5A78qBChEWaWqCxU8Fsa7o4VgsJDIim6V7AZw2sF_kuHIdro90xEXwZ1m0gt3ar6WT8LhL_Db4JaHmWo68zzbYTwJigPRrjHYAVfjVMm6bhk2RPhePnJzOvgaKbZjfDVDL2Z3RUvsT5yj1KPdBK6DWtjEmgfECPOyqlXRQWDlVlRzuhlbzH72iSoXuZteKPmzKSWh0rMQrTA0lqgVe2S-qtO2mVc-OFPw",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.615891581.1659732621; _gid=GA1.2.745962271.1659732622; __gads=ID=67cf507c2608561a-2291f511ced40086:T=1659732623:RT=1659732623:S=ALNI_MYxzA38Ke7fb61cbSBcHoFXS885PQ; __gpi=UID=000007a89297910e:T=1659736268:RT=1659736268:S=ALNI_MYQVdsCeigGCoa-KOotFb48elRtiQ; _gat=1",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=6132&ItemNamePattern=Perfect+Roe&PriceMax=96000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Linux; Android 6.0.1; Nexus 6P Build/MMB29P) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/47.0.2526.83 Mobile Safari/537.36",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=4794&ItemNamePattern=Hakeijo&PriceMax=59000&V3ReCaptchaToken=03ANYolqvgaNsUCwC48Kvr_X17g2RUYmkL0jihmWTYh26FLkkvECr_2FB0pG_z1ccIk8l1D0PnIBP1Laf0mxBkPVOT3z4M81U5TaSbvZ0YGZjGOYBBLFMQ2s0QqBHrNrj-loW_qbq3wCgckC3_kzsycpZbP6Y6soL_BbT3qGqku5ztJV2GP_3TzAMnfdTaDwSbBxQAmZzcTGsAzoL-fppjKxIv7R8pCWJ0y00Ol0Y1PC4Uw9h2g3t6tPdtXg2G3hoRvjlSXAkFZYoTuNUw7gGqgajsYrGvnOtgwOxjIsX861IJh-J1ac6KK7s4-XZ23GC5bXGsJKN65uODxl-qQ6hMXbl7uDZ-LvHByquzY3g7WjfQUrn10eyGME-_3a7hle3nkqmOH5SbaSqVaGW-4OAoTTAsPo3OL1gEsvtgK9Y1ZdgCowHMiB8OKFmrdYdQf-snIxedBrKadbYZkiIk6_MuzGm_ylAT5ESbYVl0VlQCo3vf12e04ngZNoE0OsIQPn6b4aQ-P0OlV8VNS3-JRwdph2lFZWhbSo6FAA",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.13044580.1659742537; _gid=GA1.2.997962271.1659742538; _gat=1; __gads=ID=8ce8cd57d800557c-220cd53795d4008a:T=1659742537:RT=1659742537:S=ALNI_MZc6xRZKVL76SPQn_ZKDXRjVeGQkg",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=4794&ItemNamePattern=Hakeijo&PriceMax=59000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (iPhone9,3; U; CPU iPhone OS 10_0_1 like Mac OS X) AppleWebKit/602.1.50 (KHTML, like Gecko) Version/10.0 Mobile/14A403 Safari/602.1",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=211&ItemNamePattern=Dreugh+Wax&PriceMax=28000&V3ReCaptchaToken=03ANYolque8aZQG6o9k5aGhbf0qoLJumjZpzsQhjkeHJLdjTcHB9hhTOlaFu5MpL9IXg290XMtMzbYsXJH9Ey4nYXNR7kTj2BOyHi5QaiI5UbPQ6o7oV1hWQntFEXNNKCt_31HB9CcOf8y0wL_iDBmuKjGxrlpdUXAqpShBoQnLkwvv7S2TbtqxhfPrfOnweyznvyvUnn5caA7h-e3exhoSD0Ae2zktUbxdlfNqQFK7PFCalz9OYMXbWw6uHcJ7VyWLJ2m1hx8a6nmyvYJSUep839iL69u42YX3bWaK93LLxmHP7LoWVE_x2D8TwzJcJG4tSujm8uVh7JuflEDDGJXpqdihYAZRTZgqKaIeEWJGM9A-isdKKVGp1nvdM5zrCcBjQwYedVCVdeNTD8l-d1HF8dycRctBDDCBaBcwVZ3Mm90WvB_nWVsYscjn6HB3Qn--1J5h-Jc4P2QE1qlNsL0r2LKetp_YUM1fAEfqiNAnAlKqzAipxY9WjYKe8UA_DvcH1HWfzARSnoMayyif4dyAjsY-866xAFpnQ",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.561033126.1659741811; _gid=GA1.2.724436800.1659741811; _gat=1; __gads=ID=7ebd18a756007877-2273df9d8dd400a0:T=1659741812:RT=1659741812:S=ALNI_MYlFsjk7GauB9XBOPOMCn21MgFHgQ",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=211&ItemNamePattern=Dreugh+Wax&PriceMax=28000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (Linux; Android 7.1.1; G8231 Build/41.2.A.0.219; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/59.0.3071.125 Mobile Safari/537.36",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=5687&ItemNamePattern=Tempering+Alloy&PriceMax=14000&V3ReCaptchaToken=03ANYolqst8gXZO4N7olJVGzoRZh7Encp9y8tuSd61QyVz5giEXQ68-KMr1VpNTmkyk31ii88Xg8x0w-wjjdqZ0QoNl_cEgnXFyh8kF4gqaAdZTAwucXRblqmVMxZYSiAOo5o2G3KVpRvVUsKx9rt2bEJrjs8ZBlNQoiVov1TEoSCDxSgTb4ZjtbjzltA7hU2T38i0voKUd6-6DmarMpLOYV7LXUiyqDIWYRqwmeTA-xwqoZ61aP6rg8NhOd4XM5Pfhv-Zqs2dAEYKEdCw5zlEDy8liB5rfgTdQtm7GARyO79fsKCrsJGAf_e2weV9aDZAqNSpF1f5-yrX0UOwsBKTmq9cwe0wzHE3RTU909MvMzYU2ScEOT44I98lVcM3BZ9utNDmMslUrFSLorDlqeR2BCMujQirppTIguD1uuTwO2SYXSxgwAaR7F_0caK2hd_5RIsAhHDHNK8OHI_sk9dmiRtQ7h0wFSMk1CPG9PYq-5ZMqxbk24u1U6C7GNhJXDT81tk9GtYX8emuPywZOZCshPf96fPY_pMVaA",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.1740830699.1659741946; _gid=GA1.2.525497034.1659741947; _gat=1; __gads=ID=6ac771b7fba59ddd-2216082791d40053:T=1659741946:RT=1659741946:S=ALNI_MbbsypDbVeFjrTSrhhTKX8gdIWhNw",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=5687&ItemNamePattern=Tempering+Alloy&PriceMax=14000",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (iPhone12,1; U; CPU iPhone OS 13_0 like Mac OS X) AppleWebKit/602.1.50 (KHTML, like Gecko) Version/10.0 Mobile/15E148 Safari/602.1",
    "version": "13"},
{
    "authority": "us.tamrieltradecentre.com",
    "path": "/api/pc/Trade/Search?ItemID=11983&ItemNamePattern=Mundane+Rune&PriceMax=1100&V3ReCaptchaToken=03ANYolqtJBb5KvlzUYgEUxOySQxcRnwft_dyv8CEz3tgnEVe_lWaiJrxyfiJ9q67jCVsygSIuPtNQyNTeFC6_Q0tseLbTNIpEt1--Hgn77MxfE5Ee4arj2rxYjoz10NsYBJOA911WxWIsjQdkUUkXGVDlsply388BBbgMt_O_sArtqppeMMLUe4WF5yiC3O53q0qCq_jAaU8FAhtM8YLcmdPJdMNwaL3OYaEBflSreHYoMYLsCBHBpNpj1l1V6XUAWfdC3SFyTDWRcN6Xf5i1IWStOFZHw7soqECi-UvoOoSaWZsg8av3021W769Bet3rAkDjBtC90jcalFy9p-IX4Xnd-0PKjf5dHvFNoWEXqXSC8u5S90z_0poM7yDSStUTGIMF3wgq_7B_3BRrKHx2BS7MZI5tQ_T0DfQ-q0UxeaPqlccbH5EiX7R3XP8llXZFGMNY1h37mCYhpnpHfyZNsL0G0On09F1vIysryU6qzcz6IODIftUkGzDvyDKRbLZRzCGzdDCz0ld7GCyF6uHb4O9gd1P69BWv0A",
    "scheme": "https",
    "accept": "application/json",
    "accept-encoding": "gzip, deflate, br",
    "accept-language": "en-US,en;q=0.9",
    "admode": "Full",
    "cache-control": "no-cache",
    "cookie": "_ga=GA1.2.1559819487.1659742129; _gid=GA1.2.967365983.1659742130; _gat=1; __gads=ID=1864c44cd09e9e3a-227214728dd40000:T=1659742130:RT=1659742130:S=ALNI_MZUbbD1A-O-jh3xwIoF-7rIbOkb9w",
    "pragma": "no-cache",
    "referer": "https://us.tamrieltradecentre.com/pc/Trade/SearchResult?ItemID=11983&ItemNamePattern=Mundane+Rune&PriceMax=1100",
    "sec-ch-ua": "^\^Chromium^^;v=^\^104^^, ^\^",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "Windows",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "user-agent": "Mozilla/5.0 (iPhone; CPU iPhone OS 12_0 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/69.0.3497.105 Mobile/15E148 Safari/605.1",
    "version": "13"}
]
listings = []
GuildKioskLocation ={
                0: "Craglorn: Belkarth",
                1: "Craglorn: BelkarthOutlawRefuge",
                2: "Coldharbour: HollowCity",
                3: "Coldharbour: HajUxith",
                4: "Coldharbour: CourtOfContempt",
                5: "Reaper's March: Rawlkha",
                6: "Reaper's March: RawlkhaOutlawRefuge",
                7: "Reaper's March: Vinedusk",
                8: "Reaper's March: Dune",
                9: "Malabal Tor: Baandari",
                10: "Malabal Tor: Drabul",
                11: "Malabal Tor: Valeguard",
                12: "Malabal Tor: VelynHarborOutlawRefuge",
                13: "Greenshade: Marbruk",
                14: "Greenshade: MarbrukOutlawRefuge",
                15: "Greenshade: VerrantMorass",
                16: "Greenshade: Greenheart",
                17: "Grahtwood: EldenRoot",
                18: "Grahtwood: EldenRootOutlawRefuge",
                19: "Grahtwood: Cormount",
                20: "Grahtwood: Southpoint",
                21: "Auridon: Skywatch",
                22: "Auridon: Firsthold",
                23: "Auridon: VulkhelGuard",
                24: "Auridon: VulkhelGuardOutlawRefuge",
                25: "Khenarthi's Roost: Mistral",
                26: "Bangkorai: Evermore",
                27: "Bangkorai: EvermoreOutlawRefuge",
                28: "Bangkorai: BangkoraiPass",
                29: "Bangkorai: HallinsStand",
                30: "Alik'r Desert: Sentinel",
                31: "Alik'r Desert: SentinelOutlawRefuge",
                32: "Alik'r Desert: MorwhasBounty",
                33: "Alik'r Desert: Bergama",
                34: "Rivenspire: Shornhelm",
                35: "Rivenspire: ShornhelmOutlawRefuge",
                36: "Rivenspire: HoarfrostDowns",
                37: "Rivenspire: Oldgate",
                38: "Stormhaven: Wayrest",
                39: "Stormhaven: WayrestOutlawRefuge",
                40: "Stormhaven: FirebrandKeep",
                41: "Stormhaven: KoeglinVillage",
                42: "Glenumbra: Daggerfall",
                43: "Glenumbra: DaggerfallOutlawRefuge",
                44: "Glenumbra: LionGuardRedoubt",
                45: "Glenumbra: WyrdTree",
                46: "Betnikh: Stonetooth",
                47: "Stros M'Kai: PortHunding",
                48: "The Rift: Riften",
                49: "The Rift: RiftenOutlawRefuge",
                50: "The Rift: Nimalten",
                51: "The Rift: FallowstoneHall",
                52: "Eastmarch: Windhelm",
                53: "Eastmarch: WindhelmOutlawRefuge",
                54: "Eastmarch: VoljarMeadery",
                55: "Eastmarch: FortAmol",
                56: "Shadowfen: Stormhold",
                57: "Shadowfen: StormholdOutlawRefuge",
                58: "Shadowfen: VenomousFens",
                59: "Shadowfen: Hissmir",
                60: "Deshaan: Mournhold",
                61: "Deshaan: MournholdOutlawRefuge",
                62: "Deshaan: TalDeicGrounds",
                63: "Deshaan: MuthGnaarHills",
                64: "Stonefalls: Ebonheart",
                65: "Stonefalls: Kragenmoor",
                66: "Stonefalls: DavonsWatch",
                67: "Stonefalls: DavonsWatchOutlawRefuge",
                68: "Bal foyen: Dhalmora",
                69: "Bleakrock Isle: Bleakrock",
                70: "Wrothgar: Orsinium",
                71: "Wrothgar: OrsiniumOutlawRefuge",
                72: "Wrothgar: MorkulStronghold",
                73: "Hew's Bane: ThievesDen",
                74: "Hew's Bane: AbahsLanding",
                75: "Gold Coast: Anvil",
                76: "Gold Coast: Kvatch",
                77: "Gold Coast: AnvilOutlawRefuge",
                78: "Vvardenfell: VivecCity",
                79: "Vvardenfell: VivecCityOutlawRefuge",
                80: "Vvardenfell: SadrithMora",
                81: "Vvardenfell: Balmora",
                82: "Clockwork City:BrassFortress",
                83: "Clockwork City:BrassFortressOutlawRefuge",
                84: "Summerset: Lillandril",
                85: "Summerset: Shimmerene",
                86: "Summerset: Alinor",
                87: "Summerset: AlinorOutlawRefuge",
                88: "Murkmire: Lilmoth",
                89: "Murkmire: LilmothOutlawRefuge",
                90: "Northern Elsweyr: Rimmen",
                91: "Northern Elsweyr: RimmenOutlawRefuge",
                92: "Southern Elsweyr: Senchal",
                93: "Southern Elsweyr: SenchalOutlawRefuge",
                94: "Western Skyrim: Solitude",
                95: "Western Skyrim: SolitudeOutlawRefuge",
                96: "The Reach:Markarth",
                97: "The Reach:MarkarthOutlawRefuge",
                98: "Blackwood: Leyawiin",
                99: "Blackwood: LeyawiinOutlawRefuge",
                100: "Fargrave",
                101: "FargraveOutlawRefuge",
                102: "High Isle: GonfalonBay",
                103: "High Isle: GonfalonBayOutlawRefuge"
            }

for h, i in zip(heads,querystring):
    r = requests.request("GET", url, data=payload, headers=h, params=i)
    data = r.json()
    for i in range(len(data['TradeListPageModel']['TradeDetails'])):
        listings.append([
            str((data['TradeListPageModel']['TradeDetails'][i]['TradeAsset']['Item']['Name'])),
            str((GuildKioskLocation[data['TradeListPageModel']['TradeDetails'][i]['GuildKioskLocationID']])),
            str((data['TradeListPageModel']['TradeDetails'][i]['GuildName'])),
            data['TradeListPageModel']['TradeDetails'][i]['TradeAsset']['UnitPrice'],
            (int((time.time() - data['TradeListPageModel']['TradeDetails'][i]['DiscoverUnixTime'])))
        ])
deals= []
for x in range(len(listings)):
    if listings[x][4] <= 180:
        deals.append(listings[x])
email_sender = "ttc.price.check@gmail.com"
email_password = "rdnekyewycvgapzw"
email_receiver = "ttc.price.check@gmail.com"
now = datetime.now()
current_time = now.strftime("%I:%M:%S")
sent_from = email_sender
to = email_receiver
subject = "%s" % current_time
body = ""
for y in deals:
    body += "Item: %s \nLocation: %s \n Guild Name: %s \n Time Since List: %s \n Unit Price: %s\n\n" % (y[0],y[1],y[2],y[3],y[4])
email_text = """\
From: %s
To: %s
Subject: %s

%s
""" % (sent_from, to, subject, body)

#Only sending if deals list has entries
if deals:
     try:
        smtp_server = smtplib.SMTP_SSL('smtp.gmail.com', 465)
        smtp_server.ehlo()
        smtp_server.login(email_sender, email_password)
        smtp_server.sendmail(sent_from, email_receiver, email_text)
        smtp_server.close()
        print("Email sent")
     except Exception as ex:
        print("Something went wrong")
else:
    print("No deals")
